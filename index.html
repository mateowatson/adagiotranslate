<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Adagio Translate</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="app-header">
      <div class="brand">Adagio Translate</div>
      <nav class="menu-bar" aria-label="Application menu">
        <details class="menu" id="menu-file">
          <summary>File</summary>
          <div class="menu-items" role="menu">
            <button id="new-project-btn" role="menuitem">New Project</button>
            <button id="import-doc-btn" role="menuitem">Import Document</button>
            <button id="open-project-btn" role="menuitem">Open Project</button>
            <button id="save-project-btn" role="menuitem">Save Project</button>
            <button id="save-project-as-btn" role="menuitem">Save Project As</button>
          </div>
        </details>

        <details class="menu" id="menu-edit">
          <summary>Edit</summary>
          <div class="menu-items" role="menu">
            <button data-edit-action="undo" role="menuitem">Undo</button>
            <button data-edit-action="redo" role="menuitem">Redo</button>
            <button data-edit-action="cut" role="menuitem">Cut</button>
            <button data-edit-action="copy" role="menuitem">Copy</button>
            <button data-edit-action="paste" role="menuitem">Paste</button>
            <button data-edit-action="selectAll" role="menuitem">Select All</button>
          </div>
        </details>

        <details class="menu" id="menu-view">
          <summary>View</summary>
          <div class="menu-items" role="menu">
            <label>
              <span>Split Mode</span>
              <select id="split-mode">
                <option value="sentence">Sentence</option>
                <option value="paragraph">Paragraph</option>
              </select>
            </label>
            <label>
              <span>Editor Position</span>
              <select id="editor-position">
                <option value="right">Right</option>
                <option value="bottom">Bottom</option>
              </select>
            </label>
          </div>
        </details>

        <button id="local-settings-btn" class="menu-launcher" type="button">Local Settings</button>
      </nav>
      <div class="project-meta" id="project-meta"></div>
    </header>

    <main id="workspace" class="workspace editor-right">
      <section class="panel segments-panel">
        <h2>Segments</h2>
        <div class="segment-controls">
          <button id="resegment-btn">Re-Segment</button>
          <button id="auto-translate-btn" type="button" class="hidden">Auto-Translate Segment</button>
          <span id="segment-count">0 segments</span>
        </div>
        <p class="sidebar-note">Click a segment to edit its translation inline.</p>
        <ol id="segment-list" class="segment-list"></ol>
      </section>

      <aside class="panel glossary-panel">
        <h2>Glossary</h2>
        <button id="add-glossary-btn" type="button">Add Entry</button>
        <p class="sidebar-note">Relevant entries for selected segment appear here.</p>
        <ul id="glossary-list" class="glossary-list"></ul>
      </aside>
    </main>

    <input type="file" id="doc-file-input" class="hidden" />
    <input type="file" id="project-file-input" class="hidden" accept=".adagio.json,.json" />

    <dialog id="project-setup-dialog">
      <form method="dialog" id="project-setup-form">
        <h3>Project Setup</h3>
        <label>
          Source Language
          <select id="source-language" required>
            <option value="">Select source language</option>
            <option value="ar">Arabic</option>
            <option value="bn">Bengali</option>
            <option value="zh">Chinese (Simplified)</option>
            <option value="zh-TW">Chinese (Traditional)</option>
            <option value="nl">Dutch</option>
            <option value="en">English</option>
            <option value="fr">French</option>
            <option value="de">German</option>
            <option value="el">Greek</option>
            <option value="he">Hebrew</option>
            <option value="hi">Hindi</option>
            <option value="id">Indonesian</option>
            <option value="it">Italian</option>
            <option value="ja">Japanese</option>
            <option value="ko">Korean</option>
            <option value="fa">Persian</option>
            <option value="pl">Polish</option>
            <option value="pt">Portuguese</option>
            <option value="ru">Russian</option>
            <option value="es">Spanish</option>
            <option value="sv">Swedish</option>
            <option value="th">Thai</option>
            <option value="tr">Turkish</option>
            <option value="uk">Ukrainian</option>
            <option value="ur">Urdu</option>
            <option value="vi">Vietnamese</option>
          </select>
        </label>
        <label>
          Target Language
          <select id="target-language" required>
            <option value="">Select target language</option>
            <option value="ar">Arabic</option>
            <option value="bn">Bengali</option>
            <option value="zh">Chinese (Simplified)</option>
            <option value="zh-TW">Chinese (Traditional)</option>
            <option value="nl">Dutch</option>
            <option value="en">English</option>
            <option value="fr">French</option>
            <option value="de">German</option>
            <option value="el">Greek</option>
            <option value="he">Hebrew</option>
            <option value="hi">Hindi</option>
            <option value="id">Indonesian</option>
            <option value="it">Italian</option>
            <option value="ja">Japanese</option>
            <option value="ko">Korean</option>
            <option value="fa">Persian</option>
            <option value="pl">Polish</option>
            <option value="pt">Portuguese</option>
            <option value="ru">Russian</option>
            <option value="es">Spanish</option>
            <option value="sv">Swedish</option>
            <option value="th">Thai</option>
            <option value="tr">Turkish</option>
            <option value="uk">Ukrainian</option>
            <option value="ur">Urdu</option>
            <option value="vi">Vietnamese</option>
          </select>
        </label>
        <label>
          Split Method
          <select id="setup-split-mode">
            <option value="sentence">Sentence</option>
            <option value="paragraph">Paragraph</option>
          </select>
        </label>
        <menu>
          <button value="cancel" type="button" id="setup-cancel-btn">Cancel</button>
          <button value="default" type="submit">Continue</button>
        </menu>
      </form>
    </dialog>

    <dialog id="glossary-dialog">
      <form method="dialog" id="glossary-form">
        <h3>Add Glossary Entry</h3>
        <label>
          Target Term
          <input id="glossary-target-term" required />
        </label>
        <label>
          Translation / Meaning
          <input id="glossary-translation" required />
        </label>
        <menu>
          <button value="cancel" type="button" id="glossary-cancel-btn">Cancel</button>
          <button value="default" type="submit">Add</button>
        </menu>
      </form>
    </dialog>

    <dialog id="local-settings-dialog">
      <form method="dialog" id="local-settings-form">
        <h3>Local Settings</h3>
        <p class="sidebar-note">
          Google Cloud API key is stored only in this browser and is not included in exported project JSON files.
        </p>
        <label>
          Google Cloud API Key
          <input id="google-api-key-input" type="password" placeholder="AIza..." autocomplete="off" />
        </label>
        <p id="local-settings-status" class="sidebar-note">Key not saved.</p>
        <menu>
          <button value="cancel" type="button" id="local-settings-close-btn">Close</button>
          <button value="default" type="button" id="clear-google-key-btn">Clear Key</button>
          <button value="default" type="button" id="save-google-key-btn">Save Key</button>
        </menu>
      </form>
    </dialog>

    <script src="https://unpkg.com/mammoth/mammoth.browser.min.js"></script>
    <script type="module" src="app.js"></script>
  </body>
</html>
